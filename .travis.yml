language: scala
jobs:
  include:
    - stage: test
      script: sbt test
    - stage: deploy
      if: tag =~ ^v
      script: sbt publishSigned sonatypeRelease
env:
  global:
  - secure: JGdQAHMpfJKjtJXaZwkKvcStJVLhCPrd4ze6oOUS/dvJxvt46wJJCd6yd1NaEcNfuNYg0hSEhYT1J1W8MxP3HSI7Pg5xOBz31iHRNMQ+PUevJAH9LPZeYuzRXV7LzaSsf+OPufiVIeIcMrvjihgKu1DHTEimT3UqgGKBzKpK0GKRpbsEIYY9UyUZZtdjk39TWYP6kp+8fGG+ur9pECBe6QGxkrwA2ev5fu7iE0CFP2dCb4EJ9RnU/zgX7EpE4i75wSKScJRzTGe+zS1DDtFCQjN72Fgz2HSWnQiTll0gvRtbc72+0cmp/IuJ2UPj1T+eHT9pFOeiWnyZ6b7Yg0NzCF3cucJ1oJctL1KP3P/LpviT/65+RTS32i1nupVvv4/85PdkxMky45Wj2ebrAbl2AaRU22YLkvy0ZWyJcGxowvk52NoIVYA9JNu/oRNlJy/F0CvgCdLPV+tuzpYDHMw8HZA5nmX8uDNwzrcGzRLo5FBnx818tYVVckRfPOpp2VbNEooV7YT9iV83XeY10wpq2ObDHReZqMzfP0zvFOeQIhynko2SijATbU1NiYtnn+OZV12AE4mmz2XRTP4cA3PijyrAH+k6ry/uwFAeOkZ+IxSwH2vUiTmkbHfdl0PsH5kLAEz3B/myAtJW+rkhY/eDXRWspCjlmWXX4+wYS7QGBpQ=
  - secure: YOFvh3nAWVkU4y5GFp8L+UtrOHRQq6PcsmwkhNlReZt0KtBLmaZ+6A020BU91TTC4eh/dzgFEImsgFxZbzk7OXyjyc7OhAmMd+LyijuoIcy4DFh3sCwM61MbjEtHd1nt15wYajCnxbqTddhan5dxNZz8cLOgcjSOUATQVCK6pDyvXkwsA/mrs0Z/HlvdJDgK8/Mb6m4jCk5HP3AHPABAton/oUPfvTsWjmYIedqjb6EKvLQD4i3FkbRMpDDdycHOWt8e29TQNhDfqsUFdnWwmjJMMQrodI+IHXVPHsvfhwYJoC/giu2ETtTtCbyMdxLWgsAznw3nnY+J+Gk4QLPDMtlhhyt25wojpdnUshEOBpO2m2Hh7+Bt8wk86e00ZiKjP9PI1IOAtnayqg/Jg997NWx3ZM8cknF/bk7+o3tX/csXvVRRN6OH9uhts18QMeIx/c3T7jGVwihPRuGA6LcIZA5/GVIiyBenmzeX6VCtbzllcuII9qGGfyVH9zFUBll9yTg/S27UTsLVashTZetPjlmCmv1OwIzicPaG5YmyaA+dFMRPah23fwA/3Sp34hSZw4DwaZ6IVMcmVw0EHsg50kzAWdF8RIMfbLSlmdATPtI5vp3sc1kieHEtaMahJ65lJm8nZFu67NJsyrehAVaMY7ALWd73Kkds1s8bSnJ9fpw=
  - secure: qPmfEb2Cgfh9WdtW9YJzCjfjCxxDyAOa//tvdCMGlOABUg+VQl9QsST2Lcrvne+2jilYWOuTrjwE3olU02W9aUEA4iL/x9VyGRjhK7i1kBPI3fltLWCenbw9qWii4ywzGiQRtmphDDDHN+LszIWl+YE/3esVMQFalPHseYLW6AOPzzA7b3sIFRG0AzvKQDtoAxY7jKPNwCIAuJXMcayhNF9Rjl3vskqZy8VT3KbpdNgdORY6zUrBLD4F4kjax9AcqfY5NokV0k1qwfqPjW52uqbz8W6S6xraWGeswA5zCt26wea/rWS9DxOofYPzdnOR9Q1CIZRzlbfFU5ED/WzLxTbx5qU+gqTWrHIEO+eqJvCK42zP55mbWv3PvBMF8RNn+lxLW8HTY9HvnJjmOKZseGq6WMLbYiopuoa9qxaE2JTcpsZt4SEVlD2nhF8Ply0ydtI1AEtJEE37yU5Q8EcaeUFYTwX1RKY7oNlY85Hd74MR24mhVvRA0EPovfu3vWl5QeJDRUQ8mTtF8+9B/xX01ClBDrzNPdSBGy5ShYRfIgrP4WiM7Id91GJLsTLVRVPKiirsiW58c09EVVSqc28KSfAmYOLAe9PH8GHj5RpYSjVvit5gODjRTGiVTF69YTIRVf3ZNKwTTm3b3g/tKSLQtpGoVlAksYhaWT6nCUlOEXE=
before_install:
- openssl aes-256-cbc -K $encrypted_e60dfa0a2678_key -iv $encrypted_e60dfa0a2678_iv
  -in ci/secring.asc.enc -out ci/secring.asc -d
