language: scala
jobs:
  include:
  - stage: test
    script: sbt test
  - stage: deploy
    if: tag =~ ^v
    script: sbt publishSigned sonatypeRelease
env:
  global:
  - secure: 06HLYmSPuQqd0U7/+uOGUblBU2UqT9RrSgrFSY6sR+V4z5atThUiK5flG4hd4Ym+ulUpC+jGr5AakZIcYQBWHOy4PQ3uuLjYiR50YmV0bho/pvHi7eON2BmuM+8bfvcvMA2mkk4Zg1efp9hEbCMG7HSibYhC7RLMphKaqsQ7KH3b+uKhXxwCaUxwNx2kpfX9H1bmV6hbc+44c+WAdDKxvpPHUuwnNboDwhP7D1SIKon9+gGayyWMBytuAkH3g/Kr4bikajN1TJBViHhvNH2abCooXhHnY0lJ0nhrqjaaeV0sPQDRW4CDHM4HBEmkpoRA9sIyEdkW3cRjTGkEuGmu6GJ6QpbAzhQV8tHdK/jNvEMIINDGeYlG2lIP5Bv9hr0OxWY36pHY7H0qUusGiOJ92BiXgukfueB+AIzhiOhD2SeKzcbZO0lhV037RNpcKsx5S+v7F03E2QBia6vny6DMDogZkmJ/5iKoZYoTFNwpgh3gPFZ+zAPzbd6osdJ1lBpdzKDdoJNG3UrOufDuDJdo3Hnbn1FLp+0OkuEdM/YAbBni6mejEVN6ZtJiHC5RYzPf2aZAAsnP9yon2yvcaqiypKUsl+WygADsz3mm+CgAWw8IgH2M2iNWQWHYxE2RYpyPcgdTXLdJj4WzxxcJkddC9vmqXF6Ag2mhr3+/VdM4jfM=
  - secure: fLrrUSYB7qHY/U3AKZQmsx5H6oOntF52Hsw09Lqp1oTlFvlTWsdke9EvMp5OYGpwEu4vNcdZH3XNv9Nc6N+Vpt/YPMhPyOYWmsIWQ1+IK6Sbs1NhacO6iAxQGPuISutrP4qSKR50+8sxqM1OFZAZpnzpHq0o3X1/5uik50ApP/bMCtA1gjTCAdrLI8JjhIwdAFn1yaizLxUzkDrAcHm/yGDejgx9KgUebH295puSy0rqdNbni8znHvdqOLjslqGdEZjkZs3m67uCdr1JmcIIP/rtS753GhSS12a0428h3C9Pu87eWIXVx55Crr0aImp2y56AAR0S3g/8SfakQjpg3+G5pzrkW3twO0kLMbMZh8qKICF4UQaXlhDwzxeq9EYjtho5ZBi5Ov0eB0yzGrO05uZlLK2SAsJkddKIoWFfOALN6wnV2NCaxObQIiZASnAEV7qpLhJ4FQDnRQXJvaOgLUIuwNz1KdRov5W8kVmRFdmaucIsicFZV3UoVUJAidKi4txQ3F+p6eIGGB0nnbMLGLERPgEBDtCgRCRl3kCOELgRm6ZFwLZinRswuPne4311s/zUVJhQu/OHZmTCrJbrAZ2l5/+fKjKa35yXsUpmAgvfEEEzLToWyZsFyrgV16w2FCTndf/FQlq57nnJtbglEdBrl3i2TpHkwjOc55Crvcs=
  - secure: HxuMfqA4oPlITaNFP3+WeKp/cqoFos0Ul+1YNaolgEbXoq0m7N+Z+MNr9re94XXLiKdEZNfLwzMGJiPdN8a1dUNSct9R88hC72KMe8EW096HLTU/3/OcMxoTCaJa+67/JSHytaKzeN2Z5iJNLdjMNghIf5QFIzSqeJYipKDqTI0p7/ORxrKneFMMmC1Ags0YmCJjet+kAJM6kK+mNWAqbzLvk6VYFODLvqoVZDKI0SnLjqHgZfhRD5DSsM4JGIulpG9+ZTkTfo7EkYY0IUkHB7eRaum71tH3MmJ9GsnJ+v7laqE7Qmhv1WufDfD+d78R9aeAguu5yG34km00pY4ubQc8hGxuiTCGu5+Df4M4Q+LLygqZX8L1+nMmlUSPY0zQGg0t0WvWMWVdc2HqlTqDuhMD8Wk6IrNM2M5cBxlOGQYFnVjZ210vfW4q8cBkSG5AbkiKIW4uKVyIHjfSgV7BPvKe3M4+8+agp5hg/+h+ZoMzJOJ1PsZSxiehn0y7PLv7lxxQ1Nf4NAfNcbLBh6qRUSI7ej8+tXhFLoonf8UIxQGnpAtzKM+R2xqxSSsfZmXnZ0izm9JjgI9vJvHr+McBFvqk4lFBvLqCOiN1GSACDJxIL8WMlH/bQ1paehWOkOTdcNpduaNmVTKl4WmFUB1KBnet/lziZzPDsAXlLBaaKAc=
before_install:
- openssl aes-256-cbc -K $encrypted_e60dfa0a2678_key -iv $encrypted_e60dfa0a2678_iv
  -in ci/secring.asc.enc -out ci/secring.asc -d
