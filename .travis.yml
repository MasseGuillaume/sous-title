language: scala
jobs:
  include:
  - stage: test
    script: sbt test
  - stage: deploy
    if: tag =~ ^v
    script: sbt publishSigned sonatypeRelease
env:
  global:
  - secure: OmdC8T32kEZL/jc+3wsHpkFPoVPWhzqZ2Snuf9M9DemA60fDVfpFtlbWs7kUKuGVMVT7weYo+uG8AOy9W7WQ5zlgVCN8OXUNMB5eDkAJerW0+NluZB/JQk5+IHRp+DKNy3+YHS+kH/DzZrjQreQoAF6QgUgdECMZpATVCRRF0eL+s1JINDFFYJuL4TSP1cdLtIn7vlKM1n0tLIbicUfk1sO0XULfAXCv9gwYECiWsoa+pC1rUqF5DSoZ3L88vrxQZRUWcb/BBaY/pceSeleEWjcR3Iq+74W1UG6R7r0Usz3Pv8RnnruKDqsX5Vx0MwQlxsJQyVpu1+5ltzBD0RwWf3VQAgwOLVUCD0Zm/jUfMWOTS2fixwKtKSowZ+uczJMkOlC08RiZZbLJOCg6q4Su2X17BR3naTG11IJmRoJFhIJmPqAcAcsRQOSgnnN8E8PCKu98gFvUubTK7PFRRjfYGCDG6rTIC3kkrtcFjbxlluH0C3j6ujuK64t9QAnfU3K83UElNk+r4Rs3iQy1icBblYNl5tAQv5+nNc+3djMgnSKTmCJHQNuMs7N1sPL2cIoXjqSAAl9vj54NdvMTGhbqBKX5fGlzem7NQOJJ18tjuzledRolTM9FMa1CJz0K4TmO5SttsoDK0S7nCjnbfMeoZzHIPromaoH6CqzEFo8ivxQ=
  - secure: 6IK12URsGdhw643K+VXCWCMPKc8dVmtuBytl7Vyx96UuVsO8kE6v18P3QxhDvh1qOeVWftEyuq9BS8x29xX1FUcBrnAEN8dSqLWuHTzs04NaaXq0G6kMfRa2rWOBWVjVj8ZwWHaPa0rkHKMDVfdQzvr0S4hZIMhnDS8KjCSLxTUmfLGdbXguHNoC+kqKwNyiKDKMgXF2jTs69vy0JdHSzovuS1vVFvQfe1n5vKN+UQlNx+/G2ByThLZFbUWw5detHzCf5g0OEjoyEPlNwun9WOXXQV45Yc/IYsxc4YGviO9xSEkj20mesoEiGD5i16B0z9Cv0/PUJBGWRzeUoGlTLJ7ypx/ZMjHAY9WPIt2XRLf2+M9ylTdyx/7+U8peDz55HVGmlwgVxVzf6LbIQty0c4OINQtt7hjpFI4v3ZcPh7mVZHH+bgiw/acTfMqWeeCcTc1xlYjw+C0GgmlwMEBkuPWh34yzuJYS5kC7Tx+fzabgbgJ1Hm6RS2TSX3B+6vn2EwnXdMkvcs+DKsV85GRuQqgIiMee3fwULkOeMPbFrjwlMTsjc1vzODhRpOTzKX+OVtOC5fEFR6ShnkjL50s/mznBWi/9fCKiOJ3Yu5AewPaN+73STIt7C9Z8rn9OuMexk2ipRk4SB+Bj1RIrsRFnNctZMsFaAAtzbJi/0qgp4T0=
  - secure: iDejP/XETVZ8axZfrRjAKPMclQzB94eBZiP4eXtJHcPF7Y4L8qK75lpXu7SjKmZsnGBWGnkj59xJ7xaeE/yFHvvQAMu+Dy6UwLT4G/YG+xNV+6DbyRkKvc+Rq6QG0FMbcem7GqVYyq0CLDDEmPD2Xiez2Ng3jNJzsa3e9QTgGTJF2SO+U/M/V687YIj6B1xezQzLiU9uGMQ/nO7yoM2vOCFzFEZLyhG4bWaYg1cBr9kxjCB0XEc0z9+1o8mwwoIfqMYwscYR93/jh9c5EAfJukU6xRPu0f73Xusn94n9hWSfytPNREuuc18nvye7vV1PDImuZ5NfoI8gLnfDFo8ZUBuHrVyWxTY8fZmTiiniLVDTRVfjZ9XB0covT80ds3cSjDc5V6AZK4IvyCOVqCEqTFcgtcZBlV9y5r2v1lbnZ1mDajG+1MUssX/guxfUM0d2mFVvfbniVJEciw6OCRltvt1g0h4paGv5zXHCeTnmlbZb0gbxGcpHbQFiw9MeAenH1mcN5VW+/a602vxeA3gdtiUsZCa/JEYOtZ3vXqggTHr69u0Oqa8eAafhC8b65y0Lm02cAvbBOD5dgTv2GTIVwjvVNEU9jXUYCUulfeCHVTcYES2iBR5L9xGBq71VjPAEZaM4pEQHXXgh7be2PIkYu74O+6t6u/E3gXP51pIPS5Q=
before_install:
- openssl aes-256-cbc -K $encrypted_e60dfa0a2678_key -iv $encrypted_e60dfa0a2678_iv
  -in ci/secring.asc.enc -out ci/secring.asc -d
